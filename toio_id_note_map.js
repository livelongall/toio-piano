export const TOIO_ID_NOTE_MAP = {
  "3702220": {
    "label": "SingleNote_0_C",
    "midi": 12,
    "freq_hz": 16.351597831287414
  },
  "3702221": {
    "label": "SingleNote_0_C#",
    "midi": 13,
    "freq_hz": 17.323914436054505
  },
  "3702222": {
    "label": "SingleNote_0_D",
    "midi": 14,
    "freq_hz": 18.354047994837977
  },
  "3702223": {
    "label": "SingleNote_0_D#",
    "midi": 15,
    "freq_hz": 19.445436482630058
  },
  "3702224": {
    "label": "SingleNote_0_E",
    "midi": 16,
    "freq_hz": 20.601722307054366
  },
  "3702225": {
    "label": "SingleNote_0_F",
    "midi": 17,
    "freq_hz": 21.826764464562746
  },
  "3702226": {
    "label": "SingleNote_0_F#",
    "midi": 18,
    "freq_hz": 23.12465141947715
  },
  "3702227": {
    "label": "SingleNote_0_G",
    "midi": 19,
    "freq_hz": 24.499714748859326
  },
  "3702228": {
    "label": "SingleNote_0_G#",
    "midi": 20,
    "freq_hz": 25.956543598746574
  },
  "3702229": {
    "label": "SingleNote_0_A",
    "midi": 21,
    "freq_hz": 27.5
  },
  "3702230": {
    "label": "SingleNote_0_A#",
    "midi": 22,
    "freq_hz": 29.13523509488062
  },
  "3702231": {
    "label": "SingleNote_0_B",
    "midi": 23,
    "freq_hz": 30.86770632850775
  },
  "3702232": {
    "label": "SingleNote_1_C",
    "midi": 24,
    "freq_hz": 32.70319566257483
  },
  "3702233": {
    "label": "SingleNote_1_C#",
    "midi": 25,
    "freq_hz": 34.64782887210901
  },
  "3702234": {
    "label": "SingleNote_1_D",
    "midi": 26,
    "freq_hz": 36.70809598967594
  },
  "3702235": {
    "label": "SingleNote_1_D#",
    "midi": 27,
    "freq_hz": 38.890872965260115
  },
  "3702236": {
    "label": "SingleNote_1_E",
    "midi": 28,
    "freq_hz": 41.20344461410875
  },
  "3702237": {
    "label": "SingleNote_1_F",
    "midi": 29,
    "freq_hz": 43.653528929125486
  },
  "3702238": {
    "label": "SingleNote_1_F#",
    "midi": 30,
    "freq_hz": 46.2493028389543
  },
  "3702239": {
    "label": "SingleNote_1_G",
    "midi": 31,
    "freq_hz": 48.999429497718666
  },
  "3702240": {
    "label": "SingleNote_1_G#",
    "midi": 32,
    "freq_hz": 51.91308719749314
  },
  "3702241": {
    "label": "SingleNote_1_A",
    "midi": 33,
    "freq_hz": 55.0
  },
  "3702242": {
    "label": "SingleNote_1_A#",
    "midi": 34,
    "freq_hz": 58.27047018976124
  },
  "3702243": {
    "label": "SingleNote_1_B",
    "midi": 35,
    "freq_hz": 61.7354126570155
  },
  "3702244": {
    "label": "SingleNote_2_C",
    "midi": 36,
    "freq_hz": 65.40639132514966
  },
  "3702245": {
    "label": "SingleNote_2_C#",
    "midi": 37,
    "freq_hz": 69.29565774421802
  },
  "3702246": {
    "label": "SingleNote_2_D",
    "midi": 38,
    "freq_hz": 73.41619197935188
  },
  "3702247": {
    "label": "SingleNote_2_D#",
    "midi": 39,
    "freq_hz": 77.78174593052023
  },
  "3702248": {
    "label": "SingleNote_2_E",
    "midi": 40,
    "freq_hz": 82.4068892282175
  },
  "3702249": {
    "label": "SingleNote_2_F",
    "midi": 41,
    "freq_hz": 87.30705785825097
  },
  "3702250": {
    "label": "SingleNote_2_F#",
    "midi": 42,
    "freq_hz": 92.4986056779086
  },
  "3702251": {
    "label": "SingleNote_2_G",
    "midi": 43,
    "freq_hz": 97.99885899543733
  },
  "3702252": {
    "label": "SingleNote_2_G#",
    "midi": 44,
    "freq_hz": 103.82617439498628
  },
  "3702253": {
    "label": "SingleNote_2_A",
    "midi": 45,
    "freq_hz": 110.0
  },
  "3702254": {
    "label": "SingleNote_2_A#",
    "midi": 46,
    "freq_hz": 116.54094037952248
  },
  "3702255": {
    "label": "SingleNote_2_B",
    "midi": 47,
    "freq_hz": 123.47082531403103
  },
  "3702256": {
    "label": "SingleNote_3_C",
    "midi": 48,
    "freq_hz": 130.8127826502993
  },
  "3702257": {
    "label": "SingleNote_3_C#",
    "midi": 49,
    "freq_hz": 138.59131548843604
  },
  "3702258": {
    "label": "SingleNote_3_D",
    "midi": 50,
    "freq_hz": 146.8323839587038
  },
  "3702259": {
    "label": "SingleNote_3_D#",
    "midi": 51,
    "freq_hz": 155.56349186104046
  },
  "3702260": {
    "label": "SingleNote_3_E",
    "midi": 52,
    "freq_hz": 164.81377845643496
  },
  "3702261": {
    "label": "SingleNote_3_F",
    "midi": 53,
    "freq_hz": 174.61411571650194
  },
  "3702262": {
    "label": "SingleNote_3_F#",
    "midi": 54,
    "freq_hz": 184.9972113558172
  },
  "3702263": {
    "label": "SingleNote_3_G",
    "midi": 55,
    "freq_hz": 195.99771799087463
  },
  "3702264": {
    "label": "SingleNote_3_G#",
    "midi": 56,
    "freq_hz": 207.65234878997256
  },
  "3702265": {
    "label": "SingleNote_3_A",
    "midi": 57,
    "freq_hz": 220.0
  },
  "3702266": {
    "label": "SingleNote_3_A#",
    "midi": 58,
    "freq_hz": 233.08188075904496
  },
  "3702267": {
    "label": "SingleNote_3_B",
    "midi": 59,
    "freq_hz": 246.94165062806206
  },
  "3702268": {
    "label": "SingleNote_4_C",
    "midi": 60,
    "freq_hz": 261.6255653005986
  },
  "3702269": {
    "label": "SingleNote_4_C#",
    "midi": 61,
    "freq_hz": 277.1826309768721
  },
  "3702270": {
    "label": "SingleNote_4_D",
    "midi": 62,
    "freq_hz": 293.6647679174076
  },
  "3702271": {
    "label": "SingleNote_4_D#",
    "midi": 63,
    "freq_hz": 311.1269837220809
  },
  "3702272": {
    "label": "SingleNote_4_E",
    "midi": 64,
    "freq_hz": 329.6275569128699
  },
  "3702273": {
    "label": "SingleNote_4_F",
    "midi": 65,
    "freq_hz": 349.2282314330039
  },
  "3702274": {
    "label": "SingleNote_4_F#",
    "midi": 66,
    "freq_hz": 369.9944227116344
  },
  "3702275": {
    "label": "SingleNote_4_G",
    "midi": 67,
    "freq_hz": 391.99543598174927
  },
  "3702276": {
    "label": "SingleNote_4_G#",
    "midi": 68,
    "freq_hz": 415.3046975799451
  },
  "3702277": {
    "label": "SingleNote_4_A",
    "midi": 69,
    "freq_hz": 440.0
  },
  "3702278": {
    "label": "SingleNote_4_A#",
    "midi": 70,
    "freq_hz": 466.1637615180899
  },
  "3702279": {
    "label": "SingleNote_4_B",
    "midi": 71,
    "freq_hz": 493.8833012561241
  },
  "3702280": {
    "label": "SingleNote_5_C",
    "midi": 72,
    "freq_hz": 523.2511306011972
  },
  "3702281": {
    "label": "SingleNote_5_C#",
    "midi": 73,
    "freq_hz": 554.3652619537442
  },
  "3702282": {
    "label": "SingleNote_5_D",
    "midi": 74,
    "freq_hz": 587.3295358348151
  },
  "3702283": {
    "label": "SingleNote_5_D#",
    "midi": 75,
    "freq_hz": 622.2539674441618
  },
  "3702284": {
    "label": "SingleNote_5_E",
    "midi": 76,
    "freq_hz": 659.2551138257398
  },
  "3702285": {
    "label": "SingleNote_5_F",
    "midi": 77,
    "freq_hz": 698.4564628660078
  },
  "3702286": {
    "label": "SingleNote_5_F#",
    "midi": 78,
    "freq_hz": 739.9888454232688
  },
  "3702287": {
    "label": "SingleNote_5_G",
    "midi": 79,
    "freq_hz": 783.9908719634985
  },
  "3702288": {
    "label": "SingleNote_5_G#",
    "midi": 80,
    "freq_hz": 830.6093951598903
  },
  "3702289": {
    "label": "SingleNote_5_A",
    "midi": 81,
    "freq_hz": 880.0
  },
  "3702290": {
    "label": "SingleNote_5_A#",
    "midi": 82,
    "freq_hz": 932.3275230361799
  },
  "3702291": {
    "label": "SingleNote_5_B",
    "midi": 83,
    "freq_hz": 987.7666025122483
  },
  "3702292": {
    "label": "SingleNote_6_C",
    "midi": 84,
    "freq_hz": 1046.5022612023945
  },
  "3702293": {
    "label": "SingleNote_6_C#",
    "midi": 85,
    "freq_hz": 1108.7305239074883
  },
  "3702294": {
    "label": "SingleNote_6_D",
    "midi": 86,
    "freq_hz": 1174.6590716696303
  },
  "3702295": {
    "label": "SingleNote_6_D#",
    "midi": 87,
    "freq_hz": 1244.5079348883237
  },
  "3702296": {
    "label": "SingleNote_6_E",
    "midi": 88,
    "freq_hz": 1318.5102276514797
  },
  "3702297": {
    "label": "SingleNote_6_F",
    "midi": 89,
    "freq_hz": 1396.9129257320155
  },
  "3702298": {
    "label": "SingleNote_6_F#",
    "midi": 90,
    "freq_hz": 1479.9776908465376
  },
  "3702299": {
    "label": "SingleNote_6_G",
    "midi": 91,
    "freq_hz": 1567.981743926997
  },
  "3702300": {
    "label": "SingleNote_6_G#",
    "midi": 92,
    "freq_hz": 1661.2187903197805
  },
  "3702301": {
    "label": "SingleNote_6_A",
    "midi": 93,
    "freq_hz": 1760.0
  },
  "3702302": {
    "label": "SingleNote_6_A#",
    "midi": 94,
    "freq_hz": 1864.6550460723597
  },
  "3702303": {
    "label": "SingleNote_6_B",
    "midi": 95,
    "freq_hz": 1975.533205024496
  },
  "3702304": {
    "label": "SingleNote_7_C",
    "midi": 96,
    "freq_hz": 2093.004522404789
  },
  "3702305": {
    "label": "SingleNote_7_C#",
    "midi": 97,
    "freq_hz": 2217.4610478149766
  },
  "3702306": {
    "label": "SingleNote_7_D",
    "midi": 98,
    "freq_hz": 2349.31814333926
  },
  "3702307": {
    "label": "SingleNote_7_D#",
    "midi": 99,
    "freq_hz": 2489.0158697766474
  },
  "3702308": {
    "label": "SingleNote_7_E",
    "midi": 100,
    "freq_hz": 2637.02045530296
  },
  "3702309": {
    "label": "SingleNote_7_F",
    "midi": 101,
    "freq_hz": 2793.825851464031
  },
  "3702310": {
    "label": "SingleNote_7_F#",
    "midi": 102,
    "freq_hz": 2959.955381693075
  },
  "3702311": {
    "label": "SingleNote_7_G",
    "midi": 103,
    "freq_hz": 3135.9634878539946
  },
  "3702312": {
    "label": "SingleNote_7_G#",
    "midi": 104,
    "freq_hz": 3322.437580639561
  },
  "3702313": {
    "label": "SingleNote_7_A",
    "midi": 105,
    "freq_hz": 3520.0
  },
  "3702314": {
    "label": "SingleNote_7_A#",
    "midi": 106,
    "freq_hz": 3729.3100921447194
  },
  "3702315": {
    "label": "SingleNote_7_B",
    "midi": 107,
    "freq_hz": 3951.066410048992
  },
  "3702316": {
    "label": "SingleNote_8_C",
    "midi": 108,
    "freq_hz": 4186.009044809578
  },
  "3702317": {
    "label": "SingleNote_8_C#",
    "midi": 109,
    "freq_hz": 4434.922095629953
  },
  "3702318": {
    "label": "SingleNote_8_D",
    "midi": 110,
    "freq_hz": 4698.63628667852
  },
  "3702319": {
    "label": "SingleNote_8_D#",
    "midi": 111,
    "freq_hz": 4978.031739553295
  },
  "3702320": {
    "label": "SingleNote_8_E",
    "midi": 112,
    "freq_hz": 5274.04091060592
  },
  "3702321": {
    "label": "SingleNote_8_F",
    "midi": 113,
    "freq_hz": 5587.651702928062
  },
  "3702322": {
    "label": "SingleNote_8_F#",
    "midi": 114,
    "freq_hz": 5919.91076338615
  },
  "3702323": {
    "label": "SingleNote_8_G",
    "midi": 115,
    "freq_hz": 6271.926975707989
  },
  "3702324": {
    "label": "SingleNote_8_G#",
    "midi": 116,
    "freq_hz": 6644.875161279122
  },
  "3702325": {
    "label": "SingleNote_8_A",
    "midi": 117,
    "freq_hz": 7040.0
  },
  "3702326": {
    "label": "SingleNote_8_A#",
    "midi": 118,
    "freq_hz": 7458.620184289437
  },
  "3702327": {
    "label": "SingleNote_8_B",
    "midi": 119,
    "freq_hz": 7902.132820097988
  },
  "3702328": {
    "label": "SingleNote_9_C",
    "midi": 120,
    "freq_hz": 8372.018089619156
  },
  "3702329": {
    "label": "SingleNote_9_C#",
    "midi": 121,
    "freq_hz": 8869.844191259906
  },
  "3702330": {
    "label": "SingleNote_9_D",
    "midi": 122,
    "freq_hz": 9397.272573357044
  },
  "3702331": {
    "label": "SingleNote_9_D#",
    "midi": 123,
    "freq_hz": 9956.06347910659
  },
  "3702332": {
    "label": "SingleNote_9_E",
    "midi": 124,
    "freq_hz": 10548.081821211836
  },
  "3702333": {
    "label": "SingleNote_9_F",
    "midi": 125,
    "freq_hz": 11175.303405856126
  },
  "3702334": {
    "label": "SingleNote_9_F#",
    "midi": 126,
    "freq_hz": 11839.8215267723
  },
  "3702335": {
    "label": "SingleNote_9_G",
    "midi": 127,
    "freq_hz": 12543.853951415975
  },
  "3702336": {
    "label": "SingleNote_9_G#",
    "midi": 128,
    "freq_hz": 13289.750322558246
  },
  "3702337": {
    "label": "SingleNote_9_A",
    "midi": 129,
    "freq_hz": 14080.0
  },
  "3702338": {
    "label": "SingleNote_9_A#",
    "midi": 130,
    "freq_hz": 14917.240368578874
  },
  "3702339": {
    "label": "SingleNote_9_B",
    "midi": 131,
    "freq_hz": 15804.265640195976
  },
  "3702340": {
    "label": "SingleNote_10_C",
    "midi": 132,
    "freq_hz": 16744.036179238312
  },
  "3702341": {
    "label": "SingleNote_10_C#",
    "midi": 133,
    "freq_hz": 17739.688382519813
  },
  "3702342": {
    "label": "SingleNote_10_D",
    "midi": 134,
    "freq_hz": 18794.54514671409
  },
  "3702343": {
    "label": "SingleNote_10_D#",
    "midi": 135,
    "freq_hz": 19912.12695821318
  },
  "3702344": {
    "label": "SingleNote_10_E",
    "midi": 136,
    "freq_hz": 21096.16364242367
  },
  "3702345": {
    "label": "SingleNote_10_F",
    "midi": 137,
    "freq_hz": 22350.606811712252
  },
  "3702346": {
    "label": "SingleNote_10_F#",
    "midi": 138,
    "freq_hz": 23679.6430535446
  },
  "3702347": {
    "label": "SingleNote_10_G",
    "midi": 139,
    "freq_hz": 25087.70790283195
  }
};

// --- Helpers for audio/UI (WebAudio / SoundFont)
// Convert MIDI number to scientific pitch notation (e.g., 60 -> C4)
export function midiToNoteName(midi) {
  const names = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
  const n = Math.round(Number(midi));
  const name = names[((n % 12) + 12) % 12];
  const octave = Math.floor(n / 12) - 1; // MIDI 60 = C4
  return `${name}${octave}`;
}

// ★ここがポイント：全体が1オクターブ高いので、恒久的に -12 補正する
const OCTAVE_FIX = -24;

// Look up toio Standard ID string/number and return a playable note.
// transposeSemitones: shift the mapping to an audible range (e.g., +24 or +36).
export function getPlayableNoteFromToioId(toioId, transposeSemitones = 36) {
  const key = String(toioId);
  const m = TOIO_ID_NOTE_MAP[key];
  if (!m) return null;

  const baseMidi = Number(m.midi);

  // ✅ 1オクターブ下げる補正をここで適用
  const midi = baseMidi + Number(transposeSemitones) + OCTAVE_FIX;

  // Recompute frequency from MIDI so transposition stays correct.
  const freq_hz = 440 * Math.pow(2, (midi - 69) / 12);

  return {
    toioId: key,
    label: m.label,
    baseMidi,
    midi,
    noteName: midiToNoteName(midi),
    freq_hz,
  };
}

